### Basket Pricing Service — Refinitiv RTSDK (EMA) consumer

This project streams real-time prices from Refinitiv using the EMA (RTSDK) Java API.

### Requirements
- Java 21
- Maven 3.9+
- Refinitiv RTSDK Java libraries version 3.9.1.0 (EMA/ETA/ValueAdd/Cache/ANSI)

Note: Refinitiv artifacts may not be available on Maven Central. If your organization does not host them in a Maven repository, install them into your local Maven repo or configure an internal repository.

#### Local install example
Replace `/path/to/jars` with your actual jar paths:

```bash
mvn install:install-file -Dfile=/path/to/jars/ema-3.9.1.0.jar -DgroupId=com.refinitiv.ema -DartifactId=ema -Dversion=3.9.1.0 -Dpackaging=jar
mvn install:install-file -Dfile=/path/to/jars/eta-3.9.1.0.jar -DgroupId=com.refinitiv.eta -DartifactId=eta -Dversion=3.9.1.0 -Dpackaging=jar
mvn install:install-file -Dfile=/path/to/jars/etaValueAdd-3.9.1.0.jar -DgroupId=com.refinitiv.eta.valueadd -DartifactId=etaValueAdd -Dversion=3.9.1.0 -Dpackaging=jar
mvn install:install-file -Dfile=/path/to/jars/etaValueAddCache-3.9.1.0.jar -DgroupId=com.refinitiv.eta.valueadd.cache -DartifactId=etaValueAddCache -Dversion=3.9.1.0 -Dpackaging=jar
mvn install:install-file -Dfile=/path/to/jars/ansipage-3.9.1.0.jar -DgroupId=com.refinitiv.eta.ansi -DartifactId=ansipage -Dversion=3.9.1.0 -Dpackaging=jar
```

### Build
```bash
mvn -DskipTests package
```

### Run (local)
Set the required environment and run the shaded jar:

Required envs:
- `REFINITIV_HOST` — ADS hostname or IP
- `REFINITIV_PORT` — ADS port (e.g. 14002)
- `REFINITIV_USER` — DACS/ADS user
- `REFINITIV_RICS` — Comma-separated list of RICs, e.g. `IBM.N,MSFT.O`

Optional envs:
- `REFINITIV_SERVICE` — Service name, default `ELEKTRON_DD`

```bash
export REFINITIV_HOST=your-ads-host
export REFINITIV_PORT=14002
export REFINITIV_USER=your-user
export REFINITIV_RICS="IBM.N,MSFT.O"
java -jar target/basket-pricing-service-0.1.0-SNAPSHOT-shaded.jar
```

### Docker
Build the image (requires access to the Refinitiv dependencies during build):

```bash
docker build -t basket-pricing-service:dev .
```

Run:

```bash
docker run --rm \
  -e REFINITIV_HOST=your-ads-host \
  -e REFINITIV_PORT=14002 \
  -e REFINITIV_USER=your-user \
  -e REFINITIV_RICS="IBM.N,MSFT.O" \
  -e REFINITIV_SERVICE=ELEKTRON_DD \
  basket-pricing-service:dev
```

### Notes
- The app currently targets ADS/enterprise feeds via host/port. For RDP streaming, additional OAuth2 and service discovery settings are required via EMA configuration.
- Logging is configured via `src/main/resources/logback.xml`.

